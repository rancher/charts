## Configuration

The following table lists the configurable parameters of the TiDB Operator chart and their default values.

| Parameter                                             | Description                                                                                                                                              | Default                   |
|-------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|
| `clusterScoped`                                       | clusterScoped is whether tidb-operator should manage kubernetes cluster wide tidb clusters                                                    | `true`                                |
| `rbac.create`                                         | whether the service account created automatically                                                                                             | `true`                                |  
| `timezone`                                            | timezone is the default system timzone                                                                                                        | `UTC`                                 |
| `operatorImage`                                       | operatorImage is TiDB Operator image                                                                                                          | `pingcap/tidb-operator:v1.1.1`        |
| `imagePullPolicy`                                     | imagePullPolicy is the image pull policy for TiDB Operator image                                                                              | `IfNotPresent`                        |
| `tidbBackupManagerImage`                              | tidbBackupManagerImage is tidb backup manager image                                                                                           | `pingcap/tidb-backup-manager:v1.1.1`  |
| `features`                                            | Enable or disable tidb-operator features:                                                                                                     | `[]`                                  |
| `controllerManager.logLevel`                          | loglevel for the operator controller                                                                                                          | `2`                                   |
| `controllerManager.replicas`                          | replicas of the operator controller                                                                                                           | `1`                                   |
| `controllerManager.resources`                         | resources for the operator controller                                                                                                         | Memory: `50Mi`, CPU: `80m`            | 
| `controllerManager.autoFailover`                      | autoFailover is whether tidb-operator should auto failover when failure occurs                                                                | `true`                                |
| `controllerManager.pdFailoverPeriod`                  | pd failover period                                                                                                                            | `5m`                                  |
| `controllerManager.tikvFailoverPeriod`                | tikv failover period                                                                                                                          | `5m`                                  |
| `controllerManager.tidbFailoverPeriod`                | tidb failover period                                                                                                                          | `5m`                                  |
| `controllerManager.tiflashFailoverPeriod`             | tiflash failover period                                                                                                                       | `5m`                                  |
| `controllerManager.affinity`                          | affinity defines operator pod scheduling rules                                                                                                | `{}`                                  |
| `nodeSelector`                                        | nodeSelector ensure pods only assigning to nodes which have each of the indicated key-value pairs as labels                                   | `{}`                                  |
| `tolerations`                                         | tolerations are applied to pods, and allow pods to schedule onto nodes with matching taints                                                   | `[]`                                  |
| `scheduler.logLevel`                                  | the log level for the tidb operator scheduler                                                                                                 | `2`                                   |
| `scheduler.replicas`                                  | the replicas of the tidb operator scheduler                                                                                                   | `1`                                   |
| `scheduler.resources`                                 | resources for the operator scheduler                                                                                                          | Memory: `50Mi`, CPU: `80m`            |
| `scheduler.kubeSchedulerImageName`                    | the kube scheduler image                                                                                                                      | `k8s.gcr.io/kube-scheduler`           |
| `scheduler.affinity`                                  | the affinity for the tidb operator scheduler pod                                                                                              | `{}`                                  |
| `scheduler.nodeSelector`                              | the nodeSelector for the tidb operator scheduler pod                                                                                          | `{}`                                  |
| `scheduler.tolerations`                               | the tolerations for the tidb operator scheduler                                                                                               | `[]`                                  |
| `advancedStatefulset.create`                          | whether install advancedStatefulSet controller                                                                                                | `false`                               |
| `advancedStatefulset.image`                           | the image for the advancedStatefulSet controller                                                                                              | `pingcap/advanced-statefulset:v0.3.3` |
| `advancedStatefulset.logLevel`                        | the log level for the advancedStatefulSet controller                                                                                          | `2`                                   |
| `advancedStatefulset.replicas`                        | the replicas for the advancedStatefulSet controller                                                                                           | `1`                                   |
| `advancedStatefulset.resources`                       | the resources for the advancedStatefulSet controller                                                                                          | Memory: `50Mi`, CPU: `200m`           |
| `advancedStatefulset.affinity`                        | the affinity for the advancedStatefulSet controller                                                                                           | `{}`                                  |
| `advancedStatefulset.nodeSelector`                    | the nodeSelector for the advancedStatefulSet controller                                                                                       | `{}`                                  |
| `advancedStatefulset.tolerations`                     | the tolerations for the advancedStatefulSet controller                                                                                        | `[]`                                  | 
| `advancedStatefulset.create`                          | whehter tidb operator enable admission webhook                                                                                                | `false`                               |
| `advancedStatefulset.replicas`                        | the replicas for the tidb admission webhook                                                                                                   | `1`                                   |
| `advancedStatefulset.loglevel`                        | the log level for the tidb admission webhook                                                                                                  | `2`                                   |
| `advancedStatefulset.jobImage`                        | jobImage is to indicate the image used in `pre-delete-job.yaml`                                                                               | `bitnami/kubectl:latest`              |
| `admissionWebhook.validation.statefulSets`            | whether enable statefulsets hook. If enabled it, the statefulsets of tidbcluseter would update in partition by tidbcluster's annotation       | `false`                               |
| `admissionWebhook.validation.pods`                    | whether enabled pods hook. If enabled it, the pods of tidbcluster would safely created or deleted by webhook instead of controller            | `true`                                |
| `admissionWebhook.validation.pingcapResources`        | whether enabled pingcap resources hook. If enabled, the validating hook validates the correctness of the resources under pingcap.com group.   | `false`                               |
| `admissionWebhook.mutation.pingcapResources`          | defaulting hook set default values for the the resources under pingcap.com group                                                              | `true`                                |
| `admissionWebhook.failurePolicy.validation`           | the validation webhook would check the request of the given resources.                                                                        | `Ignore`                              |
| `admissionWebhook.failurePolicy.mutation`             | the mutation webhook would mutate the request of the given resources.                                                                         | `Ignore`                              |
| ` admissionWebhook.apiservice.insecureSkipTLSVerify`  | whether enable insecureSkipTLSVerifyfor tidb operator admission webhook apiservice                                                            | `true`                                |
| `admissionWebhook.apiservice.tlsSecret`               | The Secret includes the TLS ca, cert and key for the `tidb-admission-webook.<Release Namespace>.svc` Service.                                 | `""`                                  |
| `admissionWebhook.apiservice.caBundle`                | The caBundle for the webhook apiservice                                                                                                       | `""`                                  |
| `admissionWebhook.cabundle`                           | certProvider indicate the key and cert for the webhook configuration to communicate with `kubernetes.default` service.                        | `""`                                  |


